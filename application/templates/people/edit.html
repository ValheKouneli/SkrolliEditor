{% extends "layout.html" %}

{% block body %}
  <table>
    <tr>
      <th>Names</th>
    </tr>
    {% for name in person.names %}
    <tr>
      <td>{{ name.name }}</td>
      <td>
          <form method="POST" action="{{ url_for('delete_name', name_id=name.id, user_id=person.id) }} ">
            <input type="submit" value="x"/>    
          </form>
      </td>
    </tr>
    {% endfor %}
    <form method="POST" action="{{ url_for('names_create', user_id=person.id) }}">
    <tr>
        <td colspan=2>
            {{ form.name }}
        </td>
    </tr>
    <tr>
        <td>
            <ul>
                {% for error in form.name.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </td>
    <tr>
        <td colspan=2>
            <input type="hidden" name="person" value="{{ person|pprint }}"/>
            <input type="submit" value="Add a new name" />
        </td>
    </tr>
    </form>
  </table>
{% endblock %}